(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{542:function(t,s,e){"use strict";e.r(s);var n=e(10),a=Object(n.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"场景渲染事件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#场景渲染事件"}},[t._v("#")]),t._v(" 场景渲染事件")]),t._v(" "),e("p",[t._v("在Cesium中，与场景渲染有关的事件都在 "),e("a",{attrs:{href:"https://cesium.com/learn/cesiumjs/ref-doc/Scene.html#Scene",target:"_blank",rel:"noopener noreferrer"}},[t._v("Scene"),e("OutboundLink")],1),t._v(" 对象上，常见的事件如下：")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://cesium.com/learn/cesiumjs/ref-doc/Scene.html?classFilter=scene#postRender",target:"_blank",rel:"noopener noreferrer"}},[t._v("postRender"),e("OutboundLink")],1),t._v("：当场景渲染完成后触发；")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://cesium.com/learn/cesiumjs/ref-doc/Scene.html?classFilter=scene#postUpdate",target:"_blank",rel:"noopener noreferrer"}},[t._v("postUpdate"),e("OutboundLink")],1),t._v("：在场景更新后和渲染场景之前立即触发的事件；")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://cesium.com/learn/cesiumjs/ref-doc/Scene.html?classFilter=scene#preRender",target:"_blank",rel:"noopener noreferrer"}},[t._v("preRender"),e("OutboundLink")],1),t._v("：在场景渲染之前触发；")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://cesium.com/learn/cesiumjs/ref-doc/Scene.html?classFilter=scene#preUpdate",target:"_blank",rel:"noopener noreferrer"}},[t._v("preUpdate"),e("OutboundLink")],1),t._v("：在更新或渲染场景之前触发的事件；")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://cesium.com/learn/cesiumjs/ref-doc/Scene.html?classFilter=scene#terrainProviderChanged",target:"_blank",rel:"noopener noreferrer"}},[t._v("terrainProviderChanged"),e("OutboundLink")],1),t._v("：当地形提供者发生改变时触发。")])]),t._v(" "),e("h2",{attrs:{id:"场景渲染示例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#场景渲染示例"}},[t._v("#")]),t._v(" 场景渲染示例")]),t._v(" "),e("p",[t._v("本例中将使用"),e("code",[t._v("postRender")]),t._v("、"),e("code",[t._v("postUpdate")]),t._v("、"),e("code",[t._v("preRender")]),t._v("和"),e("code",[t._v("preUpdate")]),t._v("这四个事件说明场景Scene的渲染过程。")]),t._v(" "),e("p",[t._v("主要代码如下：")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("viewer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("postRender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'postRender'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nviewer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("postUpdate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'postUpdate'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nviewer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("preRender"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'preRender'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nviewer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scene"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("preUpdate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'preUpdate'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br")])]),e("p",[t._v("由于Cesium会自动开启渲染循环"),e("code",[t._v("RenderLoop")]),t._v("，所以在使用该示例时，要关闭Cesium的自动渲染，关闭方法如下：")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("viewer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("useDefaultRenderLoop "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 关闭Cesium场景自动渲染")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("关闭后需要主动触发渲染，触发的方法如下：")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("viewer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 主动触发Ceisum场景渲染")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("details",{staticClass:"custom-block details"},[e("summary",[t._v("点击查看在线示例：场景渲染示例")]),t._v(" "),e("p",[t._v("由于本例需要查看浏览器控制台输出，请读者点击下方链接跳转到示例页面，按F12打开控制台查看输出：\n"),e("a",[t._v("https://syzdev.cn/cesium-docs-demo/event/sceneRenderEvent.html")])])]),t._v(" "),e("p",[t._v("页面效果如下，首次打开时场景还没有被渲染：")]),t._v(" "),e("p",[e("img",{attrs:{src:"/cesium-docs/assets/img/advance/sre-01.png",alt:"sre-01"}})]),t._v(" "),e("p",[t._v("点击6次触发渲染按钮后，地球将会被渲染出来：")]),t._v(" "),e("p",[e("img",{attrs:{src:"/cesium-docs/assets/img/advance/sre-02.png",alt:"sre-02"}})]),t._v(" "),e("p",[t._v("点击7次触发渲染按钮后，地球外围的大气层将会被渲染出来：")]),t._v(" "),e("p",[e("img",{attrs:{src:"/cesium-docs/assets/img/advance/sre-03.png",alt:"sre-03"}})]),t._v(" "),e("p",[t._v("根据控制台输出可以得到如下结论，在每一次渲染周期下：")]),t._v(" "),e("ul",[e("li",[t._v("最先被调用的是"),e("code",[t._v("preUpdate")]),t._v("，表示当前正处于场景更新之前阶段；")]),t._v(" "),e("li",[t._v("第二个被调用的是"),e("code",[t._v("postUpdate")]),t._v("，表示当前正处于场景更新之后阶段；")]),t._v(" "),e("li",[t._v("第三个被调用的是"),e("code",[t._v("preRender")]),t._v("，表示当前正处于场景渲染之前阶段；")]),t._v(" "),e("li",[t._v("最后一个被调用的是"),e("code",[t._v("postRender")]),t._v("，表示当前正处于场景渲染之后阶段。")])]),t._v(" "),e("p",[t._v("总得来说，更新"),e("code",[t._v("Update")]),t._v("操作是先于渲染"),e("code",[t._v("Render")]),t._v("操作的，可以使用这些事件将一些外部DOM操作放在事件内，避免渲染后操作造成页面抖动。")])])}),[],!1,null,null,null);s.default=a.exports}}]);